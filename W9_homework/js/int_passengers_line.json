{
  "$schema": "https://vega.github.io/schema/vega-lite/v6.json",
  "params": [
    {
      "name": "CHART1_airport_selection",
      "value": "MELBOURNE",
      "bind": {
        "input": "select",
        "options": [
          "ADELAIDE",
          "BRISBANE",
          "CAIRNS",
          "CANBERRA",
          "DARWIN",
          "GOLD COAST",
          "HOBART",
          "MELBOURNE",
          "NEWCASTLE",
          "PERTH",
          "SUNSHINE COAST",
          "SYDNEY",
          "TOWNSVILLE",
          "All Australian Airports"
        ],
        "labels": [
            "Adelaide",
            "Brisbane",
            "Cairns",
            "Canberra",
            "Darwin",
            "Gold Coast",
            "Hobart",
            "Melbourne",
            "Newcastle",
            "Perth",
            "Sunshine Coast",
            "Sydney",
            "Townsville",
            "All Australian Airports"
          ],
        "name": "Airport 1: "
      }
    },
    {
      "name": "CHART2_airport_selection",
      "value": "BRISBANE",
      "bind": {
        "input": "select",
        "options": [
          "ADELAIDE",
          "BRISBANE",
          "CAIRNS",
          "CANBERRA",
          "DARWIN",
          "GOLD COAST",
          "HOBART",
          "KARRATHA",
          "LAUNCESTON",
          "MELBOURNE",
          "NEWCASTLE",
          "PERTH",
          "SUNSHINE COAST",
          "SYDNEY",
          "TOWNSVILLE",
          "All Australian Airports"
        ],
        "labels": [
            "Adelaide",
            "Brisbane",
            "Cairns",
            "Canberra",
            "Darwin",
            "Gold Coast",
            "Hobart",
            "Karratha",
            "Launceston",
            "Melbourne",
            "Newcastle",
            "Perth",
            "Proserpine",
            "Sunshine Coast",
            "Sydney",
            "Townsville",
            "All Australian Airports"
          ],
        "name": "Airport 2: "
      }
    }
  ],
  "data": {"url": "https://raw.githubusercontent.com/asol0014/FIT3179/main/W9_homework/data/INT_passengers.csv"},
  "config": {
    "concat": {
      "columns": 2  }},

  "vconcat": [
    {
      "width":"container",
      "title": "Airport 1 & 2: Number of International Passenger Arrivals",
      "layer": [
      {"transform": 
      [
        {"filter": "datum.AIRPORT == CHART1_airport_selection"}
      ],
      "mark": {"type": "line", "color": "lightseagreen"},
      "encoding": {
        "tooltip": [
          {"field": "Month", "type": "temporal", "format": "%B"},
          {"field": "Year", "type": "temporal", "format": "%Y"},
          {"field": "AIRPORT", "type":"nominal", "title": "Airport"},
          {"field": "Int_Pax_In", "aggregate": "sum", "title": "International Arrivals", "format": ","}
        ],
      "x": {
        "field": "Date2", "type": "temporal",
        "title": null,

        "scale": {"domain": {"param": "brush"}},

        "axis": {
          "tickCount": 8,
          "labelAlign": "left",
          "labelExpr": "[timeFormat(datum.value, '%b'), timeFormat(datum.value, '%m') == '01' ? timeFormat(datum.value, '%Y') : '']",
          "labelOffset": 4,
          "labelPadding": -24,
          "tickSize": 30,
          "gridDash": {
          "condition": {"test": {"field": "value", "timeUnit": "month", "equal": 1}, "value": []},
          "value": [2,2]
          },
          "tickDash": {
          "condition": {"test": {"field": "value", "timeUnit": "month", "equal": 1}, "value": []},
          "value": [2,2]
          }
      }
    },
    "y": {
      "field": "Int_Pax_In", "type": "quantitative", "title":null, "axis":{"format": "~s"}
    }}
  },
      {"transform": 
      [
        {"filter": "datum.AIRPORT == CHART2_airport_selection"}
      ],
      "mark": {"type": "line", "color": "DarkSlateBlue"},
      "encoding": {
        "tooltip": [
          {"field": "Month", "type": "temporal", "format": "%B"},
          {"field": "Year", "type": "temporal", "format": "%Y"},
          {"field": "AIRPORT", "type":"nominal", "title": "Airport"},
          {"field": "Int_Pax_In", "aggregate": "sum", "title": "International Arrivals", "format": ","}
        ],
      "x": {
        "field": "Date2", "type": "temporal",
        "title": null,

        "scale": {"domain": {"param": "brush"}},

        "axis": {
          "tickCount": 8,
          "labelAlign": "left",
          "labelExpr": "[timeFormat(datum.value, '%b'), timeFormat(datum.value, '%m') == '01' ? timeFormat(datum.value, '%Y') : '']",
          "labelOffset": 4,
          "labelPadding": -24,
          "tickSize": 30,
          "gridDash": {
          "condition": {"test": {"field": "value", "timeUnit": "month", "equal": 1}, "value": []},
          "value": [2,2]
          },
          "tickDash": {
          "condition": {"test": {"field": "value", "timeUnit": "month", "equal": 1}, "value": []},
          "value": [2,2]
          }
      }
    },
    "y": {
      "field": "Int_Pax_In", "type": "quantitative", "title":null, "axis":{"format": "~s"}
    }}
  }
  
  ]
  },
    {
      "title": "Airport 1 & 2: Number of International Passenger Depatures",
      "width":"container",

      "layer": [
      {"transform": 
      [
        {"filter": "datum.AIRPORT == CHART1_airport_selection"}
      ],
      "mark": {"type": "line", "color": "lightseagreen"},
      "encoding": {
        "tooltip": [
          {"field": "Month", "type": "temporal", "format": "%B"},
          {"field": "Year", "type": "temporal", "format": "%Y"},
          {"field": "AIRPORT", "type":"nominal", "title": "Airport"},
          {"field": "Int_Pax_In", "aggregate": "sum", "title": "International Depatures", "format": ","}
        ],
      "x": {
        "field": "Date2", "type": "temporal",
        "title": null,
        "scale": {"domain": {"param": "brush"}},
        "axis": {
          "tickCount": 8,
          "labelAlign": "left",
          "labelExpr": "[timeFormat(datum.value, '%b'), timeFormat(datum.value, '%m') == '01' ? timeFormat(datum.value, '%Y') : '']",
          "labelOffset": 4,
          "labelPadding": -24,
          "tickSize": 30,
          "gridDash": {
          "condition": {"test": {"field": "value", "timeUnit": "month", "equal": 1}, "value": []},
          "value": [2,2]
          },
          "tickDash": {
          "condition": {"test": {"field": "value", "timeUnit": "month", "equal": 1}, "value": []},
          "value": [2,2]
          }
      }
    },
    "y": {
      "field": "Int_Pax_Out", "type": "quantitative", "title":null, "axis":{"format": "~s"}
    }}
  },
      {"transform": 
      [
        {"filter": "datum.AIRPORT == CHART2_airport_selection"}
      ],
      "mark": {"type": "line", "color": "DarkSlateBlue"},
      "encoding": {
        "tooltip": [
          {"field": "Month", "type": "temporal", "format": "%B"},
          {"field": "Year", "type": "temporal", "format": "%Y"},
          {"field": "AIRPORT", "type":"nominal", "title": "Airport"},
          {"field": "Int_Pax_In", "aggregate": "sum", "title": "International Depatures", "format": ","}
        ],
      "x": {
        "field": "Date2", "type": "temporal",
        "title": null,

        "scale": {"domain": {"param": "brush"}},

        "axis": {
          "tickCount": 8,
          "labelAlign": "left",
          "labelExpr": "[timeFormat(datum.value, '%b'), timeFormat(datum.value, '%m') == '01' ? timeFormat(datum.value, '%Y') : '']",
          "labelOffset": 4,
          "labelPadding": -24,
          "tickSize": 30,
          "gridDash": {
          "condition": {"test": {"field": "value", "timeUnit": "month", "equal": 1}, "value": []},
          "value": [2,2]
          },
          "tickDash": {
          "condition": {"test": {"field": "value", "timeUnit": "month", "equal": 1}, "value": []},
          "value": [2,2]
          }
      }
    },
    "y": {
      "field": "Int_Pax_Out", "type": "quantitative", "title":null, "axis":{"format": "~s"}
    }}
  }
  
  ]
  },
    {  
      "title": "Average Number of International Passenger Arrivals per Airport",
      "transform": 
      [
        {"filter": "datum.AIRPORT == 'All Australian Airports'"},
        {"calculate": "datum.Int_Pax_Total / 13", "as": "avg_Int_Pax"}
      ],
      "height": 100,

      "width":"container",

      "mark": {"type": "line", "color": "lightgrey"},
      "params": [
        {
          "name": "brush",
          "select": {
            "type": "interval", 
            "encodings": ["x"]
          }
        }
      ],
      "encoding": {
      "x": {
        "field": "Date2",
        "title": null,

        "type": "temporal",
        "timeUnit": "yearmonth",
        "axis": {
          "format": "%b %Y",
          "tickCount": 8,
          "labelAlign": "left",
          "labelExpr": "[timeFormat(datum.value, '%b'), timeFormat(datum.value, '%m') == '01' ? timeFormat(datum.value, '%Y') : '']",
          "labelOffset": 4,
          "labelPadding": -24,
          "tickSize": 30,
          "gridDash": {
          "condition": {"test": {"field": "value", "timeUnit": "month", "equal": 1}, "value": []},
          "value": [2,2]
          },
          "tickDash": {
          "condition": {"test": {"field": "value", "timeUnit": "month", "equal": 1}, "value": []},
          "value": [2,2]
          }
      }
      },
      "y": {
        "field": "Int_Pax_Total",
        "type": "quantitative",
        "axis": {"tickCount": 3, "grid": false, "format": "~s"},
        "title": null
        
      }
    }
  }
]
}
