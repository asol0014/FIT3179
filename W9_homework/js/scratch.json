,
    {
      "data": {
        "url": "../js/australian_airports.json"
      },
      "transform": [
        {
          "lookup": "AIRPORT",
          "from": {
            "data": {"url": "../data/aircraft.csv"},
            "key": "airport",
            "fields": ["Dom_Acm_Out", "Dom_Acm_In"]
          }
        },
        {
          "calculate": "datum.Dom_Acm_Out + datum.Dom_Acm_In",
          "as": "total_flights"
        }
      ],
      "mark": {"type": "circle", "opacity": 0.7, "stroke": "black"},
      "encoding": {
        "longitude": {"field": "longitude", "type": "quantitative"},
        "latitude": {"field": "latitude", "type": "quantitative"},
        "size": {"field": "total_flights", "type": "quantitative", "scale": {"range": [50, 2000]}},
        "tooltip": [
          {"field": "airport", "type": "nominal"},
          {"field": "Dom_Acm_Out", "type": "quantitative"},
          {"field": "Dom_Acm_In", "type": "quantitative"},
          {"field": "total_flights", "type": "quantitative"}
        ]
